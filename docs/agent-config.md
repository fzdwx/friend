# Friend Agent é…ç½®ç¤ºä¾‹

æœ¬æ–‡æ¡£å±•ç¤ºå¦‚ä½•é…ç½® agent çš„å„ç§åŠŸèƒ½ã€‚

---

## Heartbeatï¼ˆå¿ƒè·³ï¼‰

Heartbeat å…è®¸ agent å®šæ—¶æ‰§è¡Œä»»åŠ¡ï¼Œå³ä½¿æ²¡æœ‰ç”¨æˆ·äº¤äº’ã€‚

### é…ç½®æ–¹å¼

åœ¨ agent é…ç½®ä¸­æ·»åŠ  `heartbeat` å­—æ®µï¼š

```json
{
  "id": "my-agent",
  "name": "My Assistant",
  "heartbeat": {
    "every": "30m",
    "target": "last"
  }
}
```

### é…ç½®é€‰é¡¹

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| `every` | string | å¿ƒè·³é—´éš”ï¼ˆå¦‚ "5m", "30m", "1h", "2h"ï¼‰ | "30m" |
| `target` | string | ç»“æœå‘é€ç›®æ ‡ | "last" |

### target é€‰é¡¹

- `"last"` - å‘é€åˆ°æœ€åæ´»è·ƒçš„ä¼šè¯
- `"none"` - ä¸å‘é€ç»“æœï¼ˆé™é»˜æ‰§è¡Œï¼‰
- `"whatsapp"` / `"telegram"` / `"discord"` - å‘é€åˆ°å¯¹åº”å¹³å°ï¼ˆæœªæ¥æ”¯æŒï¼‰

### HEARTBEAT.md

åœ¨ agent çš„ workspace ç›®å½•åˆ›å»º `HEARTBEAT.md` æ–‡ä»¶ï¼Œå®šä¹‰å¿ƒè·³æ—¶è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼š

```markdown
# HEARTBEAT.md

## å®šæ—¶ä»»åŠ¡

- æ£€æŸ¥æœªè¯»æ¶ˆæ¯
- å›é¡¾ä»Šæ—¥æ—¥ç¨‹
- æ£€æŸ¥ç³»ç»ŸçŠ¶æ€

å¦‚æœæ²¡æœ‰ä»»åŠ¡ï¼Œå›å¤ HEARTBEAT_OKã€‚
```

---

## Cronï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰

Cron å…è®¸è®¾ç½®ä¸€æ¬¡æ€§æé†’æˆ–å‘¨æœŸæ€§ä»»åŠ¡ã€‚

### ä½¿ç”¨æ–¹å¼

é€šè¿‡ `cron` å·¥å…·è®¾ç½®ï¼š

```
# ä¸€æ¬¡æ€§æé†’ï¼ˆ10åˆ†é’Ÿåï¼‰
cron add message="æé†’æˆ‘ä¼‘æ¯ä¸€ä¸‹" at_seconds=600

# å‘¨æœŸæ€§ä»»åŠ¡ï¼ˆæ¯å°æ—¶ï¼‰
cron add message="æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€" every_seconds=3600

# Cron è¡¨è¾¾å¼ï¼ˆæ¯å¤© 9:00ï¼‰
cron add message="æ—©å®‰é—®å€™" cron_expr="0 9 * * *"

# åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡
cron list

# åˆ é™¤ä»»åŠ¡
cron remove job_id="xxx"
```

### Cron è¡¨è¾¾å¼

æ”¯æŒæ ‡å‡† 5 å­—æ®µ cron è¡¨è¾¾å¼ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆ†é’Ÿ (0 - 59)
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ å°æ—¶ (0 - 23)
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ—¥æœŸ (1 - 31)
â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœˆä»½ (1 - 12)
â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ˜ŸæœŸ (0 - 6, 0=å‘¨æ—¥)
â”‚ â”‚ â”‚ â”‚ â”‚
* * * * *
```

#### å¸¸ç”¨ç¤ºä¾‹

| è¡¨è¾¾å¼ | è¯´æ˜ |
|--------|------|
| `0 9 * * *` | æ¯å¤© 9:00 |
| `0 */2 * * *` | æ¯ 2 å°æ—¶ |
| `30 9 * * 1-5` | å·¥ä½œæ—¥ 9:30 |
| `0 0 * * 0` | æ¯å‘¨æ—¥åˆå¤œ |
| `0 9 1 * *` | æ¯æœˆ 1 æ—¥ 9:00 |

#### é¢„å®šä¹‰è¡¨è¾¾å¼

| è¡¨è¾¾å¼ | è¯´æ˜ |
|--------|------|
| `@hourly` | æ¯å°æ—¶ |
| `@daily` | æ¯å¤© 0:00 |
| `@weekly` | æ¯å‘¨æ—¥ 0:00 |
| `@monthly` | æ¯æœˆ 1 æ—¥ 0:00 |
| `@yearly` | æ¯å¹´ 1 æœˆ 1 æ—¥ 0:00 |

---

## å®Œæ•´é…ç½®ç¤ºä¾‹

```json
{
  "id": "productivity-agent",
  "name": "Productivity Assistant",
  "identity": {
    "name": "Max",
    "emoji": "ğŸš€",
    "vibe": "Efficient and proactive"
  },
  "model": "anthropic/claude-sonnet-4-5",
  "thinkingLevel": "medium",
  "heartbeat": {
    "every": "30m",
    "target": "last"
  }
}
```
